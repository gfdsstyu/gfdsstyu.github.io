<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학습 점수 추세 분석 매뉴얼 (w/ Gemini AI)</title>
    <!-- Tailwind CSS CDN 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 기본 폰트 설정 (Tailwind가 Inter를 기본으로 하지만, 명시적으로 선언) */
        body {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f9fafb; /* bg-gray-50 */
            color: #1f2937; /* text-gray-800 */
        }
        /* SVG 내 텍스트 스타일 */
        .svg-text {
            font-size: 10px;
            fill: #374151; /* text-gray-700 */
        }
        .svg-label {
            font-size: 12px;
            font-weight: 600;
        }
        /* Gemini 모달 로딩 스피너 */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- 메인 컨테이너 -->
    <main class="max-w-5xl mx-auto p-4 sm:p-10">

        <!-- 헤더 -->
        <header class="mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-center text-blue-700 my-8 pb-4 border-b-2 border-gray-200">
                📈 학습 점수 추세분석을 위한 이동평균선 활용 매뉴얼
            </h1>
            <p class="text-center text-gray-600">본 매뉴얼은 수험생의 일일 학습 점수 데이터를 바탕으로, 프로그램이 자동으로 계산한 '학습일 기준' 이동평균선(5일, 20일, 60일) 차트를 올바르게 해석하고 전략을 수립하는 것을 목적으로 합니다.</p>
        </header>

        <!-- 
        ============================================================
        [수정된 섹션 1: 중요 원칙 및 한계점]
        - '학습일' 기준 내용 삭제
        - '난이도 일관성' 및 '범위 일관성' 주의사항 추가
        ============================================================
        -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">1. ⚠️ 중요: 차트 분석 전 이해 및 한계점</h2>
            <div class="bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-6 rounded-lg space-y-4">

                <!-- '학습일' 기준 내용은 요청에 따라 삭제됨 -->

                <h3 class="text-lg font-semibold">주의사항 (Disclaimer)</h3>
                <ul class="list-disc list-inside space-y-3"> <!-- 간격을 space-y-3로 조정 -->
                    <li><strong class="text-red-600">(진단 O, 예측 X):</strong> 본 차트는 미래의 합격을 '예측'하는 도구가 아닙니다. 이것은 오직 '현재 나의 학습 상태'를 객관적으로 '진단'하는 <strong>계기판(Dashboard)</strong>입니다. "골든 크로스가 떴으니 합격한다"가 아니라, "골든 크로스가 떴으니 내 학습법이 잘 먹히고 있다"로 해석해야 합니다.</li>
                    
                    <!-- ⭐️ [추가된 주의사항 1] ⭐️ -->
                    <li><strong class="text-red-600">(난이도 일관성):</strong> 본 차트는 매일 <strong>'유사한 난이도의 테스트'</strong>를 수행함을 전제로 합니다. 시험의 난이도가 매일 크게 변동하면(예: 쉬운 챕터 vs 어려운 챕터), 점수 자체를 직접 비교할 수 없어 추세 분석이 왜곡됩니다.</li>

                    <!-- ⭐️ [추가된 주의사항 2] ⭐️ -->
                    <li><strong class="text-red-600">(범위 일관성):</strong> '재무회계' 점수와 '세법' 점수를 하나의 차트에 혼합하면 의미가 없습니다. 이 분석은 '동일 과목' 또는 '전 범위 모의고사'와 같이 <strong>일관된 대상을 테스트할 때</strong> 가장 유용합니다.</li>
                    
                    <li><strong>(주관성 인지):</strong> '유사도 점수' 등은 채점 기준, AI 모델에 따라 변동될 수 있는 주관적 데이터입니다. 이 차트의 가치는 통계적 신뢰성이 아닌, 학습 과정을 관리하는 <strong>'심리적 유용성'</strong>에 있습니다.</li>
                    <li><strong class="text-red-600">(초기 데이터/학습 부족):</strong> 학습 시작 초기(최소 20 학습일, 권장 60 학습일)에는 데이터가 부족하여 이평선이 생성되지 않았거나 안정화되지 않았습니다. 더하여 기본 개념 학습 1회독이 완료되기 전이라면 이 기간 동안의 추세 분석은 신뢰성이 낮으므로 참고용으로만 활용해야 합니다. (섹션 7 참고)</li>
                </ul>
            </div>
        </section>
        <!-- [수정 완료] -->


        <!-- 섹션 2: 효익 및 목적 -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">2. 효익 및 목적 (Benefits)</h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li><strong>노이즈(Noise) 제거:</strong> 일시적인 점수 등락에 일희일비하지 않고, <strong>'나의 진짜 실력 추세(Trend)'</strong>를 시각적으로 확인합니다.</li>
                <li><strong>동기부여:</strong> '20일선 우상향', '골든 크로스 달성' 등 명확한 시각적 목표를 제공하여 학습을 지속시킵니다.</li>
                <li><strong>조기 경보 시스템:</strong> '데드 크로스' 발생 시, 슬럼프나 학습 방법의 문제를 조기에 '진단'하고 즉각적인 대처를 가능하게 합니다.</li>
            </ol>
        </section>

        <!-- 섹션 3: 4대 이평선 지표 정의 -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">3. 4대 이평선 지표 정의</h2>
            <p class="mb-4 text-gray-600">차트에 표시되는 4개의 선은 다음과 같은 의미를 갖습니다.</p>
            <ul class="list-none space-y-3">
                <li><strong class="text-blue-600">■ 5일선 (단기 컨디션선):</strong> 최근 <strong>5 학습일</strong>의 평균. (약 1주일간의 성과)</li>
                <li><strong class="text-red-600">■ 20일선 (중기 실력선):</strong> (⭐️ <strong>핵심 지표</strong>) 최근 <strong>20 학습일</strong>의 평균. (약 1개월간의 <strong>'진짜 실력 추세'</strong>)</li>
                <li><strong class="text-green-600">■ 60일선 (장기/분기선):</strong> 최근 <strong>60 학습일</strong>의 평균. (약 1분기의 <strong>'기초 체력(Base)'</strong>)</li>
                <li><strong class="text-gray-500">■ 총누적평균선 (종합 기준선):</strong> 첫 학습일부터 현재까지 <strong>모든 학습일</strong>의 평균. ('수험 기간 전체 평균')</li>
            </ul>
        </section>

        <!-- 섹션 4: 핵심 분석 신호 -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">4. 핵심 분석 신호 (Key Signals)</h2>
            <ul class="list-disc list-inside space-y-3 mb-6">
                <li><strong>📈 골든 크로스 (Golden Cross): 긍정적 실행 신호</strong>
                    <ul class="list-inside list-['-_'] ml-6">
                        <li><strong>"5일선 > 20일선":</strong> 최근 노력이 '진짜 실력'으로 바뀌기 시작함. 학습 방법이 효과가 있다는 신호.</li>
                        <li><strong>"20일선 > 60일선":</strong> '진짜 실력'이 '기초 체력'을 뚫고 레벨업됨. <strong>본격적인 상승 추세</strong>의 시작.</li>
                    </ul>
                </li>
                <li><strong>📉 데드 크로스 (Dead Cross): 부정적 점검 신호</strong>
                    <ul class="list-inside list-['-_'] ml-6">
                        <li><strong>"5일선 < 20일선":</strong> 슬럼프 발생. 단기 부진이 '진짜 실력'을 깎아 먹기 시작함. <strong class="text-red-600">즉각적인 원인 점검 필요.</strong></li>
                        <li><strong>"20일선 < 60일선":</strong> '진짜 실력'이 '기초 체력' 아래로 무너짐. <strong class="text-red-600">전략 실패. 매우 위험한 신호.</strong></li>
                    </ul>
                </li>
                <li><strong>🚀 정배열 (Perfect Order): 최상의 상태</strong>
                    <ul class="list-inside list-['-_'] ml-6">
                        <li>(단기) 5일선 > 20일선 > 60일선 (장기) 순서로 배열된 상태. 가장 이상적인 상승 추세.</li>
                    </ul>
                </li>
            </ul>

            <!-- 그래프 예시 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                <!-- 골든 크로스 그래프 -->
                <div>
                    <h3 class="text-lg font-semibold text-center text-gray-800 mb-2">그래프 예시: 골든 크로스 (5일 > 20일)</h3>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 80 Q 100 70, 150 75 T 280 85" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 5일선 (파랑) -->
                        <path d="M 20 100 Q 100 90, 150 70 T 280 60" stroke="#3b82f6" stroke-width="2" fill="none"/>
                        <!-- 레이블 -->
                        <text x="270" y="58" class="svg-text fill-blue-500">5일선</text>
                        <text x="270" y="88" class="svg-text fill-red-500">20일선</text>
                        <text x="150" y="40" class="svg-label fill-blue-600" text-anchor="middle">골든 크로스</text>
                        <circle cx="150" cy="73" r="4" fill="#3b82f6"/>
                    </svg>
                </div>
                <!-- 데드 크로스 그래프 -->
                <div>
                    <h3 class="text-lg font-semibold text-center text-gray-800 mb-2">그래프 예시: 데드 크로스 (5일 < 20일)</h3>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 70 Q 100 80, 150 85 T 280 90" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 5일선 (파랑) -->
                        <path d="M 20 60 Q 100 70, 150 90 T 280 110" stroke="#3b82f6" stroke-width="2" fill="none"/>
                        <!-- 레이블 -->
                        <text x="270" y="113" class="svg-text fill-blue-500">5일선</text>
                        <text x="270" y="93" class="svg-text fill-red-500">20일선</text>
                        <text x="150" y="60" class="svg-label fill-red-600" text-anchor="middle">데드 크로스</text>
                        <circle cx="150" cy="87" r="4" fill="#ef4444"/>
                    </svg>
                </div>
            </div>
        </section>

        <!-- 섹션 5: 지지선과 저항선 -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">5. [심화] 지지선과 저항선의 이해</h2>
            <p class="mb-4 text-gray-600">이평선은 종종 '지지선' 또는 '저항선'의 역할을 합니다. 이는 추세를 판단하는 데 매우 유용합니다.</p>

            <h3 class="text-xl font-semibold text-blue-600 mb-2">1. 지지선 (Support Line) : 나의 '기초 체력' 방어선</h3>
            <ul class="list-disc list-inside space-y-2 mb-4">
                <li><strong>(정의):</strong> 점수가 하락하더라도, 그 수준에서는 더 이상 떨어지지 않고 반등하려는 경향을 보이는 선입니다.</li>
                <li><strong>(학습 해석):</strong> 나의 '누적된 학습량' 또는 '기초 실력'이 받쳐주는 <strong>'최소한의 방어선'</strong>입니다.</li>
                <li><strong>(예시):</strong> 20일선(실력선)이 하락하다가 60일선(기초 체력선) 근처에서 반등하는 경우, 60일선이 '지지선' 역할을 한 것입니다. "일시적 슬럼프(20일선 하락)가 왔지만, 3개월간 쌓아온 기초(60일선)가 무너지진 않았다"는 긍정적 신호입니다.</li>
            </ul>

            <h3 class="text-xl font-semibold text-red-600 mb-2">2. 저항선 (Resistance Line) : 나의 '한계점' 또는 '병목 현상'</h3>
            <ul class="list-disc list-inside space-y-2 mb-4">
                <li><strong>(정의):</strong> 점수가 상승하더라도, 그 수준에서는 더 이상 오르지 못하고 막히는 경향을 보이는 선입니다.</li>
                <li><strong>(학습 해석):</strong> 나의 '현재 지식의 한계' 또는 '반복적으로 틀리는 취약 파트'가 존재하는 <strong>'성장의 벽'</strong>입니다.</li>
                <li><strong>(예시):</strong> 20일선(실력선)이 80점대를 넘지 못하고 계속 꺾인다면, 80점대가 강력한 '저항선'으로 작용하는 것입니다. "이 80점의 벽을 뚫기(돌파) 위해서는 새로운 학습 전략이나 취약점 보완이 필요하다"는 진단이 가능합니다.</li>
            </ul>
            
            <h3 class="text-xl font-semibold text-green-600 mb-2">3. 돌파 (Breakthrough) : '레벨 업'의 신호</h3>
            <ul class="list-disc list-inside space-y-2 mb-6">
                <li>20일선이 강력한 저항선(예: 60일선 또는 이전 고점)을 뚫고 올라가는 것. 이는 <strong>'병목 현상이 해소'</strong>되었음을 의미하는 가장 강력한 긍정 신호입니다.</li>
                <li>이때, 기존의 '저항선'은 이제 '지지선'으로 역할이 바뀝니다.</li>
            </ul>

            <!-- 그래프 예시 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                <!-- 지지선 그래프 -->
                <div>
                    <h3 class="text-lg font-semibold text-center text-gray-800 mb-2">그래프 예시: 지지선 (20일선이 60일선에서 반등)</h3>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) - 지지선 -->
                        <path d="M 20 100 Q 100 95, 150 95 T 280 90" stroke="#22c55e" stroke-width="2" fill="none"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 60 Q 100 80, 150 92 T 280 60" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 레이블 -->
                        <text x="270" y="58" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="88" class="svg-text fill-green-500">60일선</text>
                        <text x="150" y="115" class="svg-label fill-green-600" text-anchor="middle">지지(Support) 발생</text>
                        <circle cx="150" cy="93" r="4" fill="#22c55e"/>
                    </svg>
                </div>
                <!-- 저항선 그래프 -->
                <div>
                    <h3 class="text-lg font-semibold text-center text-gray-800 mb-2">그래프 예시: 저항선 (20일선이 60일선에서 막힘)</h3>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) - 저항선 -->
                        <path d="M 20 60 Q 100 55, 150 55 T 280 60" stroke="#22c55e" stroke-width="2" fill="none"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 100 Q 100 80, 150 58 T 280 80" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 레이블 -->
                        <text x="270" y="83" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="63" class="svg-text fill-green-500">60일선</text>
                        <text x="150" y="40" class="svg-label fill-red-600" text-anchor="middle">저항(Resistance) 발생</text>
                        <circle cx="150" cy="57" r="4" fill="#ef4444"/>
                    </svg>
                </div>
            </div>

            <!-- '돌파' 그래프 예시 추가 -->
            <div class="mt-8"> <!-- 위쪽 여백 추가 -->
                <h3 class="text-lg font-semibold text-center text-gray-800 mb-2">그래프 예시: 돌파 (20일선이 60일 저항선 돌파)</h3>
                <div class="max-w-md mx-auto"> <!-- 그래프를 가운데 정렬하고 최대 너비 지정 -->
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) - 저항선 (점선으로 표시) -->
                        <path d="M 20 80 Q 100 75, 150 75 T 280 80" stroke="#22c55e" stroke-width="2" fill="none" stroke-dasharray="4"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 120 Q 100 100, 150 70 T 280 50" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 레이블 -->
                        <text x="270" y="48" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="83" class="svg-text fill-green-500">60일선(저항선)</text>
                        <text x="150" y="50" class="svg-label fill-green-600" text-anchor="middle">돌파! (Breakthrough)</text>
                        <circle cx="150" cy="73" r="4" fill="#22c55e"/>
                    </svg>
                </div>
            </div>
        </section>

        <!-- 섹션 6: 수험생 유형별 전략 -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">6. 수험생 유형별 전략적 해석</h2>
            <p class="mb-6 text-gray-600">수험 기간(보유한 사이클 횟수)에 따라 중점을 둬야 할 지표가 다릅니다.</p>

            <div class="space-y-8">
                <!-- Case 1: 유예생 -->
                <article class="border border-gray-200 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">🎯 Case 1: 3~6 유예생 (4~5 사이클 보유)</h3>
                    <ul class="list-disc list-inside space-y-2 mb-4">
                        <li><strong>목표:</strong> 계단식 상승 (안정적인 레벨업)</li>
                        <li><strong>핵심 지표:</strong> <strong>60일선 (장기/분기선)</strong></li>
                        <li><strong>전략:</strong>
                            <ol class="list-decimal list-inside ml-4 space-y-1">
                                <li>60일선을 '각 분기(사이클)의 <strong>최종 성과선</strong>'이자 '다음 분기의 <strong>지지선(Support Line)</strong>'으로 활용합니다.</li>
                                <li>중간에 5-20일 데드 크로스(단기 슬럼프)가 발생하더라도, <strong>20일선이 60일선에서 '지지'를 받고 반등한다면</strong> 큰 문제가 아닙니다.</li>
                            </ol>
                        </li>
                        <li><strong>(Good) 📈:</strong> 2번째 사이클(학습 61~120일 차)의 <strong>60일선 평균 레벨</strong>이 1번째 사이클의 60일선 레벨보다 <strong>'계단'처럼 한 단계 높아집니다.</strong></li>
                        <li><strong>(Bad) 📉:</strong> 20일선이 60일선(지지선)을 <strong>'붕괴(Breakdown)'</strong>시키고 하향 돌파하며, 다음 사이클의 60일선이 이전 60일선과 횡보합니다.</li>
                    </ul>
                    <h4 class="text-md font-semibold text-center text-gray-800 mb-2">그래프 예시: 유예생 (Good 사례 - 계단식 상승)</h4>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) -->
                        <path d="M 20 110 Q 100 100, 150 95 T 280 85" stroke="#22c55e" stroke-width="2" fill="none"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 100 Q 80 80, 130 90 T 200 70 T 280 75" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <text x="270" y="73" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="83" class="svg-text fill-green-500">60일선(지지)</text>
                        <text x="130" y="105" class="svg-label fill-green-600" text-anchor="middle">지지 후 상승</text>
                        <circle cx="130" cy="92" r="4" fill="#22c55e"/>
                    </svg>

                    <!-- Case 1: Bad 사례 -->
                    <h4 class="text-md font-semibold text-center text-gray-800 mb-2 mt-4">그래프 예시: 유예생 (Bad 사례 - 붕괴)</h4>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) - 지지선 -->
                        <path d="M 20 100 Q 100 95, 150 95 T 280 90" stroke="#22c55e" stroke-width="2" fill="none" stroke-dasharray="4"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 80 Q 100 90, 150 105 T 280 110" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <text x="270" y="113" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="88" class="svg-text fill-green-500">60일선(지지선)</text>
                        <text x="150" y="70" class="svg-label fill-red-600" text-anchor="middle">지지선 붕괴! (Bad)</text>
                        <circle cx="150" cy="98" r="4" fill="#ef4444"/>
                    </svg>
                    <!-- [GEMINI] Case 1 Bad 버튼 -->
                    <button id="gemini-btn-case1-bad" class="mt-4 w-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:from-red-600 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition duration-150">
                        ✨ 붕괴(Breakdown) 극복 팁 받기
                    </button>
                </article>

                <!-- Case 2: 저유예생 -->
                <article class="border border-gray-200 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">🎯 Case 2: 저유예생 (1월 시작, 3 사이클 보유)</h3>
                    <ul class="list-disc list-inside space-y-2 mb-4">
                        <li><strong>목표:</strong> 안정적 우상향</li>
                        <li><strong>핵심 지표:</strong> <strong>20일선 (중기 실력선)</strong></li>
                        <li><strong>전략:</strong>
                            <ol class="list-decimal list-inside ml-4 space-y-1">
                                <li>20일선 자체의 우상향 '각도'를 가파르게 유지하는 것이 중요합니다.</li>
                                <li>5-20일 데드 크로스 발생 시, 유예생보다 <strong>더 많은 공부량 투입으로</strong> 대처하여 20일선이 꺾이지 않도록 방어해야 합니다.</li>
                                <li>60일선은 '지지선'이라기보다, 20일선이 절대 추월당해서는 안 되는 <strong>'추격자'</strong>로 인식해야 합니다.</li>
                            </ol>
                        </li>
                    </ul>

                    <!-- Case 2: Good 사례 -->
                    <h4 class="text-md font-semibold text-center text-gray-800 mb-2 mt-4">그래프 예시: 저유예생 (Good 사례 - 안정적 우상향)</h4>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) -->
                        <path d="M 20 120 Q 100 110, 150 100 T 280 90" stroke="#22c55e" stroke-width="2" fill="none"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 100 Q 100 85, 150 75 T 280 60" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <text x="270" y="58" class="svg-text fill-red-500">20일선(실력선)</text>
                        <text x="270" y="88" class="svg-text fill-green-500">60일선(추격자)</text>
                        <text x="150" y="40" class="svg-label fill-blue-600" text-anchor="middle">격차 유지 (Good)</text>
                    </svg>
                    <!-- [GEMINI] Case 2 Good 버튼 -->
                    <button id="gemini-btn-case2-good" class="mt-4 w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:from-blue-600 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150">
                        ✨ 이 격차를 유지하는 3가지 팁 받기
                    </button>
                </article>

                <!-- Case 3: 동차생 -->
                <article class="border border-gray-200 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">🎯 Case 3: 동차생 (3월 시작, 2 사이클 보유)</h3>
                    <ul class="list-disc list-inside space-y-2 mb-4">
                        <li><strong>목표:</strong> 가파른 급상승</li>
                        <li><strong>핵심 지표:</strong> <strong>5일선 (단기 컨디션선)</strong></li>
                        <li><strong>전략:</strong>
                            <ol class="list-decimal list-inside ml-4 space-y-1">
                                <li>시간이 절대적으로 부족합니다. 5일선이 20일선을 <strong>'공격적으로'</strong> 끌어올려야 합니다.</li>
                                <li><strong>모든 데드 크로스는 치명적입니다.</strong> 5-20일 데드 크로스는 '즉시' 대응해야 합니다.</li>
                                <li>60일선(학습 60일 차 이후)은 '지지선'이 아니라 <strong>'마지노선(Last Line)'</strong>입니다. 20일선이 60일선에 근접하는 것 자체가 위험 신호입니다.</li>
                                <li><strong>'정배열'</strong> 상태를 유지하는 것이 필수적입니다.</li>
                            </ol>
                        </li>
                    </ul>
                    <h4 class="text-md font-semibold text-center text-gray-800 mb-2">그래프 예시: 동차생 (Good 사례 - 정배열 급상승)</h4>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) -->
                        <path d="M 20 120 Q 100 110, 150 100 T 280 80" stroke="#22c55e" stroke-width="2" fill="none"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 100 Q 100 90, 150 70 T 280 50" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 5일선 (파랑) -->
                        <path d="M 20 90 Q 100 70, 150 50 T 280 30" stroke="#3b82f6" stroke-width="2" fill="none"/>
                        <text x="270" y="28" class="svg-text fill-blue-500">5일선</text>
                        <text x="270" y="48" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="78" class="svg-text fill-green-500">60일선</text>
                        <text x="150" y="130" class="svg-label fill-gray-700" text-anchor="middle">정배열 (5 > 20 > 60)</text>
                    </svg>

                    <!-- Case 3: Bad 사례 -->
                    <h4 class="text-md font-semibold text-center text-gray-800 mb-2 mt-4">그래프 예시: 동차생 (Bad 사례 - 데드 크로스)</h4>
                    <svg viewBox="0 0 300 150" class="w-full h-auto border border-gray-200 rounded-lg bg-white">
                        <!-- 그리드 -->
                        <line x1="0" y1="30" x2="300" y2="30" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="60" x2="300" y2="60" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="90" x2="300" y2="90" stroke="#f3f4f6" stroke-width="1"/>
                        <line x1="0" y1="120" x2="300" y2="120" stroke="#f3f4f6" stroke-width="1"/>
                        <!-- 60일선 (초록) -->
                        <path d="M 20 120 Q 100 110, 150 100 T 280 90" stroke="#22c55e" stroke-width="2" fill="none"/>
                        <!-- 20일선 (빨강) -->
                        <path d="M 20 100 Q 100 90, 150 75 T 280 75" stroke="#ef4444" stroke-width="2" fill="none"/>
                        <!-- 5일선 (파랑) -->
                        <path d="M 20 90 Q 100 70, 150 80 T 280 95" stroke="#3b82f6" stroke-width="2" fill="none"/>
                        <text x="270" y="98" class="svg-text fill-blue-500">5일선</text>
                        <text x="270" y="78" class="svg-text fill-red-500">20일선</text>
                        <text x="270" y="93" class="svg-text fill-green-500">60일선</text>
                        <text x="150" y="50" class="svg-label fill-red-600" text-anchor="middle">치명적 데드 크로스!</text>
                        <circle cx="150" cy="78" r="4" fill="#ef4444"/>
                    </svg>
                    <!-- [GEMINI] Case 3 Bad 버튼 -->
                    <button id="gemini-btn-case3-bad" class="mt-4 w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition duration-150">
                        ✨ 긴급! 데드 크로스 3가지 대처법
                    </button>
                </article>
            </div>
        </section>

        <!-- 섹션 7: 학습 시작 초기 -->
        <section class="mb-12 bg-white p-6 sm:p-8 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">7. [특별 가이드] 학습 시작 초기 (첫 60 학습일) 분석</h2>
            <p class="mb-6 text-gray-600">첫 60 학습일간은 모든 이평선이 한 번에 보이지 않으므로, 다음과 같이 단계별로 분석합니다.</p>
            <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-gray-800">Phase 1 (학습 1~19일 차): 초기 적응기</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600">
                        <li><em>표시되는 선:</em> 5일선 (학습 5일 차부터), 총누적선</li>
                        <li><em>목표:</em> 5일선이 총누적선을 상향 돌파하여 그 위에서 움직이도록 합니다.</li>
                    </ul>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-gray-800">Phase 2 (학습 20~59일 차): 추세 형성기</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600">
                        <li><em>표시되는 선:</em> 5일선, 20일선 (학습 20일 차부터), 총누적선</li>
                        <li><em>목표:</em> <strong>'첫 번째 골든 크로스(5일선 > 20일선)'</strong>를 달성하고 유지합니다. 이는 나의 공부 방법이 효과를 내기 시작했음을 의미합니다.</li>
                    </ul>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-gray-800">Phase 3 (학습 60일 차): 1 사이클 완료</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600">
                        <li><em>이벤트:</em> <strong>60일선의 첫 번째 점(Dot)이 생성됩니다.</strong> (이 점수는 지난 60 학습일의 종합 평균입니다.)</li>
                        <li><em>목표 (Ideal):</em> 학습 60일 차 시점에, <strong>20일선이 60일선보다 높은 위치</strong>에서 시작하는 것입니다.</li>
                        <li><em>(해석):</em> 이는 나의 최근 실력(20일)이 지난 3달 평균(60일)을 이미 넘어섰다는 강력한 긍정 신호이며, 2번째 사이클을 매우 유리하게 시작함을 의미합니다.</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>
    
    <!-- [GEMINI] 모달 HTML -->
    <div id="gemini-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- 모달 헤더 -->
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-900" id="modal-title">✨ Gemini AI 학습 코치</h3>
                    <button id="modal-close-btn" class="text-gray-400 hover:text-gray-600" aria-label="Close modal">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <!-- 모달 바디 -->
                <div id="modal-body" class="mt-2">
                    <!-- 로딩 스피너 -->
                    <div id="modal-loading" class="flex justify-center items-center h-32 hidden">
                        <div class="loader"></div>
                    </div>
                    <!-- Gemini 응답 내용 -->
                    <div id="modal-content" class="text-sm text-gray-700 leading-relaxed space-y-3">
                        <!-- Gemini 응답이 여기에 삽입됩니다. -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- [GEMINI] JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('gemini-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalTitle = document.getElementById('modal-title');
            const modalLoading = document.getElementById('modal-loading');
            const modalContent = document.getElementById('modal-content');

            // API 설정
            const API_KEY = ""; // API 키는 비워둡니다.
            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;
            
            // 프롬프트 정의
            const prompts = {
                'case1-bad': {
                    title: "✨ 유예생 '붕괴' 극복 전략",
                    prompt: "Act as an expert study coach. A long-term exam student ('yuyesaeng') just saw their 20-day study score average (real skill) drop below their 60-day average (their base). This is a 'Breakdown' (붕괴). Give them 3 concrete, actionable tips to diagnose the problem and fix this serious long-term trend. Respond in Korean. Format the response with bullet points or numbered lists for readability."
                },
                'case2-good': {
                    title: "✨ 저유예생 '격차 유지' 전략",
                    prompt: "Act as an expert study coach. A mid-term exam student ('jeoyuyesaeng') is in a good trend: their 20-day average is high and rising, well above their 60-day average. What are 3 non-obvious tips to *maintain* this momentum and avoid burnout or complacency? Respond in Korean. Format the response with bullet points or numbered lists for readability."
                },
                'case3-bad': {
                    title: "✨ 동차생 '긴급 처방'",
                    prompt: "Act as an expert study coach. A short-term, high-pressure student ('dongchasaeng') just got a 'Dead Cross': their 5-day average dropped below their 20-day average. This is critical. Give them 3 *urgent* actions they must take *today* to reverse this trend. Be direct. Respond in Korean. Format the response with bullet points or numbered lists for readability."
                }
            };

            // 모달 열기 함수
            const openModal = () => modal.classList.remove('hidden');
            // 모달 닫기 함수
            const closeModal = () => modal.classList.add('hidden');

            // 모달 닫기 버튼 이벤트
            modalCloseBtn.addEventListener('click', closeModal);
            // 모달 외부 클릭 시 닫기
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // API 호출 함수 (Exponential Backoff 포함)
            const callGemini = async (promptData, retries = 3, delay = 1000) => {
                // 모달 UI 설정
                openModal();
                modalTitle.textContent = promptData.title;
                modalContent.innerHTML = '';
                modalLoading.classList.remove('hidden');

                const payload = {
                    contents: [{ parts: [{ text: promptData.prompt }] }]
                };

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        // 재시도 로직
                        if (response.status === 429 && retries > 0) {
                            console.warn(`Rate limited. Retrying in ${delay / 1000}s... (${retries} retries left)`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            return callGemini(promptData, retries - 1, delay * 2);
                        }
                        throw new Error(`API Error: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (text) {
                        // 응답 텍스트를 HTML로 변환 (줄바꿈 처리)
                        modalContent.innerHTML = text.replace(/\n/g, '<br>');
                    } else {
                        throw new Error("No text content found in response.");
                    }

                } catch (error) {
                    console.error("Gemini API call failed:", error);
                    modalContent.innerHTML = `<p class="text-red-500">죄송합니다. AI 팁을 가져오는 데 실패했습니다. 잠시 후 다시 시도해 주세요.</p><p class="text-xs text-gray-400">${error.message}</p>`;
                } finally {
                    // 로딩 스피너 숨기기
                    modalLoading.classList.add('hidden');
                }
            };

            // 버튼 이벤트 리스너 연결
            document.getElementById('gemini-btn-case1-bad').addEventListener('click', () => {
                callGemini(prompts['case1-bad']);
            });
            document.getElementById('gemini-btn-case2-good').addEventListener('click', () => {
                callGemini(prompts['case2-good']);
            });
            document.getElementById('gemini-btn-case3-bad').addEventListener('click', () => {
                callGemini(prompts['case3-bad']);
            });

        });
    </script>
</body>
</html>
