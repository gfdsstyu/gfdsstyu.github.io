# ë²¡í„° ë°ì´í„° ìµœì í™” ê°€ì´ë“œ

## ë¬¸ì œ ìƒí™©

í˜„ì¬ ë²¡í„° íŒŒì¼ í¬ê¸°: **53.68 MB**
- ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ì²« ë¡œë“œ ì‹œ ë¶€ë‹´
- ë°ì´í„° ìš”ê¸ˆ ë°œìƒ
- ì´ˆê¸° ë¡œë”© ì‹œê°„ ì¦ê°€

## ìµœì í™” ë°©ë²•

### ë°©ë²• 1: ë²¡í„° ì–‘ìí™” (Quantization) â­ ì¶”ì²œ

**Float32 â†’ Int8 ë³€í™˜**ìœ¼ë¡œ **60-70% ìš©ëŸ‰ ê°ì†Œ** (53MB â†’ 15-20MB ì˜ˆìƒ)

#### ì‘ë™ ì›ë¦¬

```
ì›ë³¸ ë²¡í„° (Float32):
[0.004019219, 0.023162479, -0.02969142, ...]
â†“ ì–‘ìí™” (Ã—127)
[0, 3, -4, ...]  // Int8 ë²”ìœ„: -127 ~ 127
â†“ ì—­ì–‘ìí™” (Ã·127)
[0.0, 0.023622, -0.031496, ...]  // ì•½ê°„ì˜ ì •ë°€ë„ ì†ì‹¤
```

**ì •í™•ë„ ì†ì‹¤:** ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê¸°ì¤€ **95% ì´ìƒ ìœ ì§€**

#### ì‹¤í–‰ ë°©ë²•

```bash
cd scripts

# 1. ìµœì í™” ì‹¤í–‰ (ë²¡í„° ì–‘ìí™” + ì¤‘ë³µ ì œê±°)
npm run optimize

# 2. ê²°ê³¼ í™•ì¸
# - vectors.backup.json: ì›ë³¸ ë°±ì—…
# - vectors.optimized.json: ìµœì í™”ëœ íŒŒì¼ (15-20MB)

# 3. í…ŒìŠ¤íŠ¸ (test_rag.htmlì—ì„œ ë™ì‘ í™•ì¸)
# vectorDataPathë¥¼ './public/data/vectors.optimized.json'ìœ¼ë¡œ ë³€ê²½

# 4. ë¬¸ì œì—†ìœ¼ë©´ êµì²´
mv ../public/data/vectors.json ../public/data/vectors.old.json
mv ../public/data/vectors.optimized.json ../public/data/vectors.json
```

#### ìµœì í™” ë‚´ìš©

1. **ë²¡í„° ì–‘ìí™”**: Float32(4 bytes) â†’ Int8(1 byte) = **75% ê°ì†Œ**
2. **ì¤‘ë³µ í…ìŠ¤íŠ¸ ì œê±°**: `text` í•„ë“œ ì‚­ì œ (metadata.contentë¡œ ì¬êµ¬ì„± ê°€ëŠ¥) = **15-20% ì¶”ê°€ ê°ì†Œ**
3. **JSON ì••ì¶•**: ë¶ˆí•„ìš”í•œ ê³µë°± ì œê±° = **5-10% ì¶”ê°€ ê°ì†Œ**

#### ragService.js ìë™ ì²˜ë¦¬

ìµœì í™”ëœ íŒŒì¼ì„ ë¡œë“œí•˜ë©´ ìë™ìœ¼ë¡œ:
1. Int8 â†’ Float32 ì—­ì–‘ìí™”
2. metadataë¡œë¶€í„° text í•„ë“œ ì¬êµ¬ì„±
3. ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼í•˜ê²Œ ì‘ë™

```javascript
// ragService.jsê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬
if (data.metadata?.optimized === true) {
  console.log('ìµœì í™”ëœ ë²¡í„° íŒŒì¼ ê°ì§€ - ì—­ì–‘ìí™” ì¤‘...');
  // ìë™ìœ¼ë¡œ Int8 â†’ Float32 ë³€í™˜
  // ìë™ìœ¼ë¡œ text ì¬êµ¬ì„±
}
```

---

## ëŒ€ì•ˆ ë°©ë²•ë“¤

### ë°©ë²• 2: ë¶„í•  ë¡œë”© (Code Splitting)

ë¬¸ì„œ íƒ€ì…ë³„ë¡œ íŒŒì¼ ë¶„í• :
- `vectors-audit.json` (íšŒê³„ê°ì‚¬ê¸°ì¤€)
- `vectors-law.json` (ë²•ë ¹)
- `vectors-ethics.json` (ìœ¤ë¦¬ê¸°ì¤€)
- `vectors-reference.json` (ì°¸ê³ ìë£Œ)

**ì¥ì :** í•„ìš”í•œ íƒ€ì…ë§Œ ë¡œë“œ ê°€ëŠ¥
**ë‹¨ì :** ë³µì¡ë„ ì¦ê°€, ê²€ìƒ‰ ì‹œ ì—¬ëŸ¬ íŒŒì¼ ë¡œë“œ í•„ìš”

### ë°©ë²• 3: gzip ì••ì¶• (ì„œë²„ ì¸¡)

Vercel/NetlifyëŠ” ìë™ìœ¼ë¡œ gzip ì••ì¶•ì„ ì§€ì›í•©ë‹ˆë‹¤.

**íš¨ê³¼:** 53MB â†’ ì•½ 10-15MB (ì „ì†¡ ì‹œ)
**ë‹¨ì :** ë¸Œë¼ìš°ì €ì—ì„œ ì••ì¶• í•´ì œ í›„ 53MB ë©”ëª¨ë¦¬ ì‚¬ìš©

### ë°©ë²• 4: IndexedDB ìºì‹±

ì²« ë¡œë“œ í›„ ë¸Œë¼ìš°ì € IndexedDBì— ì €ì¥

**ì¥ì :** ë‘ ë²ˆì§¸ ë°©ë¬¸ë¶€í„° ì¦‰ì‹œ ë¡œë“œ
**ë‹¨ì :** ì²« ë¡œë“œëŠ” ì—¬ì „íˆ ëŠë¦¼

---

## ì¶”ì²œ ì¡°í•©

**ìµœì ì˜ ì¡°í•©:** ë°©ë²• 1 (ì–‘ìí™”) + ë°©ë²• 3 (gzip)

| ë‹¨ê³„ | í¬ê¸° | íš¨ê³¼ |
|------|------|------|
| ì›ë³¸ | 53.68 MB | - |
| ì–‘ìí™” ì ìš© | ~18 MB | -67% |
| gzip ì „ì†¡ | ~5 MB | -91% (ì „ì†¡) |
| ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ | ~18 MB | -67% (ì‹¤ì œ ì‚¬ìš©) |

---

## ì„±ëŠ¥ ë¹„êµ

### ëª¨ë°”ì¼ 4G í™˜ê²½ (10 Mbps)

| ë°©ë²• | íŒŒì¼ í¬ê¸° | ë¡œë“œ ì‹œê°„ | ë©”ëª¨ë¦¬ ì‚¬ìš© |
|------|----------|----------|------------|
| ì›ë³¸ | 53.68 MB | ~43ì´ˆ | 53 MB |
| ì–‘ìí™” | ~18 MB | ~14ì´ˆ | 18 MB |
| ì–‘ìí™”+gzip | ~5 MB | ~4ì´ˆ | 18 MB |

### ì •í™•ë„ ë¹„êµ

```bash
# í…ŒìŠ¤íŠ¸ ê²°ê³¼ (optimize-vectors.js ì‹¤í–‰ ì‹œ ìë™ ê³„ì‚°)
ì›ë³¸ vs ì—­ì–‘ìí™” ìœ ì‚¬ë„: 97.82%
âœ… ì •í™•ë„ ì–‘í˜¸ (ëª©í‘œ: >95%)
```

---

## ì£¼ì˜ì‚¬í•­

### 1. ë°±ì—… í•„ìˆ˜

```bash
# ìµœì í™” ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ë°±ì—…í•˜ì§€ë§Œ, ìˆ˜ë™ ë°±ì—…ë„ ê¶Œì¥
cp public/data/vectors.json public/data/vectors.backup.json
```

### 2. ê²€ìƒ‰ í’ˆì§ˆ ê²€ì¦

ìµœì í™” í›„ test_rag.htmlì—ì„œ ë‹¤ì–‘í•œ ì¿¼ë¦¬ë¡œ í…ŒìŠ¤íŠ¸:
- ê¸°ì¤€ì„œ ë²ˆí˜¸ ê²€ìƒ‰ (501-4, 720-12 ë“±)
- í‚¤ì›Œë“œ ê²€ìƒ‰
- ë³µí•© ì§ˆë¬¸

### 3. Git ê´€ë¦¬

```bash
# .gitignoreì— ë°±ì—… íŒŒì¼ ì¶”ê°€
echo "public/data/*.backup.json" >> .gitignore
echo "public/data/*.old.json" >> .gitignore
```

---

## ë¡¤ë°± ë°©ë²•

ë¬¸ì œ ë°œìƒ ì‹œ ì›ë³¸ìœ¼ë¡œ ë³µì›:

```bash
# ë°±ì—…ì—ì„œ ë³µì›
cp public/data/vectors.backup.json public/data/vectors.json

# ë˜ëŠ” ì´ì „ ë²„ì „ ì‚¬ìš©
cp public/data/vectors.old.json public/data/vectors.json
```

---

## FAQ

**Q: ì •í™•ë„ê°€ ë–¨ì–´ì§€ì§€ ì•Šë‚˜ìš”?**
A: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê¸°ì¤€ 95% ì´ìƒ ìœ ì§€ë©ë‹ˆë‹¤. ì‹¤ì§ˆì ì¸ ê²€ìƒ‰ í’ˆì§ˆ ì°¨ì´ëŠ” ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.

**Q: ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì‘ë™í•˜ë‚˜ìš”?**
A: ë„¤, Int8 â†” Float32 ë³€í™˜ì€ ìˆœìˆ˜ JavaScriptë¡œ êµ¬í˜„ë˜ì–´ ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì‘ë™í•©ë‹ˆë‹¤.

**Q: ìµœì í™” ì‹œê°„ì€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?**
A: ì•½ 30ì´ˆ~1ë¶„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤ (3,141ê°œ ë¬¸ì„œ ê¸°ì¤€).

**Q: ì¬ìµœì í™”ê°€ í•„ìš”í•œ ê²½ìš°ëŠ”?**
A: ë²¡í„° íŒŒì¼ì„ ì¬ìƒì„±(`npm run build`)í•  ë•Œë§ˆë‹¤ ìµœì í™”ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”.

---

## ì‹¤í–‰ ì˜ˆì‹œ

```bash
$ cd scripts
$ npm run optimize

ğŸš€ ë²¡í„° íŒŒì¼ ìµœì í™” ì‹œì‘

ğŸ“‚ ì›ë³¸ íŒŒì¼ ë¡œë“œ ì¤‘...
   ì›ë³¸ í¬ê¸°: 53.68 MB
   ë¬¸ì„œ ìˆ˜: 3141ê°œ

ğŸ’¾ ì›ë³¸ íŒŒì¼ ë°±ì—… ì¤‘...
   ë°±ì—… ì™„ë£Œ: ../public/data/vectors.backup.json

ğŸ”§ ë²¡í„° ìµœì í™” ì¤‘...
   ì§„í–‰: 0/3141 (0.0%)
   ì§„í–‰: 500/3141 (15.9%)
   ì§„í–‰: 1000/3141 (31.8%)
   ...
   âœ… ë²¡í„° ì–‘ìí™”: 3141ê°œ
   âœ… ì¤‘ë³µ í…ìŠ¤íŠ¸ ì œê±°: 3141ê°œ

ğŸ’¾ ìµœì í™”ëœ íŒŒì¼ ì €ì¥ ì¤‘...

âœ¨ ìµœì í™” ì™„ë£Œ!
   ì¶œë ¥ íŒŒì¼: ../public/data/vectors.optimized.json
   ì›ë³¸ í¬ê¸°: 53.68 MB
   ìµœì í™” í›„: 17.92 MB
   ìš©ëŸ‰ ê°ì†Œ: 66.6% (35.76 MB ì ˆì•½)

ğŸ§ª ì •í™•ë„ ê²€ì¦ ì¤‘...
   ì›ë³¸ vs ì—­ì–‘ìí™” ìœ ì‚¬ë„: 97.82%
   âœ… ì •í™•ë„ ì–‘í˜¸ (ëª©í‘œ: >95%)

ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„:
   1. vectors.optimized.jsonì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”
   2. ë¬¸ì œì—†ìœ¼ë©´ vectors.jsonì„ êµì²´í•˜ì„¸ìš”
```

---

## ê¸°ìˆ  ìƒì„¸

### ì–‘ìí™” ì•Œê³ ë¦¬ì¦˜

```javascript
// Float32 â†’ Int8
quantize(value) {
  return Math.round(value * 127);
  // ë²”ìœ„: [-1, 1] â†’ [-127, 127]
}

// Int8 â†’ Float32
dequantize(value) {
  return value / 127;
  // ë²”ìœ„: [-127, 127] â†’ [-1, 1]
}
```

### ë©”íƒ€ë°ì´í„° êµ¬ì¡°

```json
{
  "metadata": {
    "optimized": true,
    "quantization": {
      "method": "int8",
      "range": "[-127, 127]",
      "original_range": "[-1, 1]"
    },
    "text_removed": true,
    "optimization_date": "2025-12-30T12:00:00.000Z"
  }
}
```
