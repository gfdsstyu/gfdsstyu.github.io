# Gamlini RAG 데이터 소스 정의서

## 📊 전체 데이터 구조

Gamlini RAG 시스템은 **6가지 데이터 소스**를 활용하여 회계 감사 전문 지식을 제공합니다.

---

## 1️⃣ 회계감사기준 (auditStandards.json)

**타입 코드:** `audit`
**우선순위:** 최상 (1순위)
**경로:** `DB/auditStandards.json`

### 설명
회계감사기준 전문(2025 개정)을 기준서 번호별로 정리한 공식 문서입니다.

### 구조
```json
{
  "standards": {
    "200": {
      "title": "독립된 감사인의 전반적인 목적...",
      "sections": {
        "1": {
          "title": "서론",
          "paragraphs": [
            {
              "number": "1",
              "text": "문단 내용..."
            }
          ]
        }
      }
    }
  }
}
```

### 벡터화 단위
- **문단(paragraph) 단위**로 분할
- 상위 정보(기준서 번호, 섹션 제목) 포함

### 예시
```
[기준서 200] 독립된 감사인의 전반적인 목적 - 서론

1. 이 기준서는 독립된 감사인의 전반적인 목적...
```

---

## 2️⃣ 법령 (legalDataLaws.json)

**타입 코드:** `law`
**우선순위:** 상 (2순위)
**경로:** `DB/legalDataLaws.json`

### 설명
회계 감사 관련 법령 (외부감사법, 공인회계사법 등)을 조문별로 정리한 문서입니다.

### 포함 법률
- 주식회사 등의 외부감사에 관한 법률
- 공인회계사법
- 기타 관련 법령

### 구조
```json
[
  {
    "law_name": "주식회사 등의 외부감사에 관한 법률",
    "articles": [
      {
        "article_id": "제1조",
        "title": "목적",
        "text_body": "이 법은 외부감사를...",
        "full_content": "..."
      }
    ]
  }
]
```

### 벡터화 단위
- **조문(article) 단위**로 분할
- 법률명 + 조항 번호 + 내용

### 예시
```
[주식회사 등의 외부감사에 관한 법률] 제1조 목적

이 법은 외부감사를 받는 회사의 회계처리와...
```

---

## 3️⃣ 윤리기준 (legalDataEthics.json)

**타입 코드:** `ethics`
**우선순위:** 중 (3순위)
**경로:** `DB/legalDataEthics.json`

### 설명
KICPA(한국공인회계사회) 윤리기준을 항목별로 정리한 문서입니다.

### 구조
```json
[
  {
    "id": "100.1",
    "part": "제1부 일반 사항",
    "chapter": "",
    "content": "공인회계사라는 직업이 가지는...",
    "source": "KICPA Code of Ethics"
  }
]
```

### 벡터화 단위
- **항목(item) 단위**로 분할
- 부 + 장 + 내용

### 예시
```
[윤리기준] 제1부 일반 사항

공인회계사라는 직업이 가지는 중요한 특징 중의 하나는...
```

---

## 4️⃣ 회계감사기준 암기교재 (questions.json)

**타입 코드:** `study`
**우선순위:** 참고용 (4순위)
**경로:** `questions.json`

### 설명
회계감사기준서를 기반으로 한 **수험용 암기 물음-답변** 모음집입니다.
⚠️ **주의:** 기출문제가 아니라 암기용 교재입니다.

### 구조
```json
[
  {
    "고유ID": "q_203",
    "표시번호": 1,
    "출처": "H",
    "problemTitle": "회계감사의 목적",
    "단원": 1,
    "물음": "감사란...",
    "정답": "재무제표가..."
  }
]
```

### 벡터화 단위
- **물음-답변 쌍**으로 분할

### 예시
```
[회계감사기준 암기교재] 회계감사의 목적

물음: 감사란 '자세히 들여다본다'는 의미로...
답: 재무제표가 재무보고체계에 따라...
```

---

## 5️⃣ KAM 실증절차 사례 (kamData.json)

**타입 코드:** `kam`
**우선순위:** 참고용 (5순위)
**경로:** `js/data/kamData.json`

### 설명
실제 감사보고서에서 추출한 **핵심감사사항(KAM) 실증절차 수행 사례**입니다.
업종별, 규모별 실무 적용 예시를 제공합니다.

### 구조
```json
[
  {
    "num": 1,
    "management_assertion": "운송주선용역 매출의 발생사실 및 기간귀속",
    "industry": "서비스업",
    "size": "자산 2조원 이상",
    "situation": "연결그룹은 운송주선용역을...",
    "reason": "우리는 연결그룹의 판단 오류나...",
    "kam": "운송주선용역 매출의 발생사실...",
    "procedures": [
      "운송주선용역에 대한 수익 인식 회계정책에 대한 이해와 평가",
      "..."
    ]
  }
]
```

### 벡터화 단위
- **KAM 사례 단위**로 분할
- 경영진 주장 + 상황 + 감사절차 포함

### 예시
```
[KAM 실증절차 사례] 운송주선용역 매출의 발생사실 및 기간귀속의 적정성

경영진 주장: 운송주선용역 매출의 발생사실 및 기간귀속
업종: 서비스업 (자산 2조원 이상)

상황:
연결그룹은 운송주선용역을 수행하고 있으며...

감사절차:
1. 운송주선용역에 대한 수익 인식 회계정책에 대한 이해와 평가
2. ...
```

---

## 6️⃣ 기출문제 (examData)

**타입 코드:** `exam`
**우선순위:** 참고용 (6순위)
**경로:** `js/features/exam/data/*.json`

### 설명
실제 **회계사 시험 기출문제**를 연도별로 정리한 데이터입니다.

### 포함 연도
- `2025_hierarchical.json` (2025년 기출)
- `2024_hierarchical.json` (2024년 기출)

### 구조
```json
[
  {
    "examId": "2025완료 (2)",
    "cases": [
      {
        "caseId": "2025_Q1",
        "topic": "윤리기준과 독립성",
        "chapter": "2.0",
        "subQuestions": [
          {
            "id": "Q1-1-1",
            "type": "Rule",
            "score": 1.0,
            "question": "회계법인이 감사업무를 수임할 수 있는지...",
            "answer": "O, 해당 거래는...",
            "explanation": "...",
            "keywords": ["약관에 따른 거래", "..."]
          }
        ]
      }
    ]
  }
]
```

### 벡터화 단위
- **소문항(subQuestion) 단위**로 분할
- 문제 + 답안 + 해설 + 키워드 포함

### 예시
```
[2025 기출문제] 윤리기준과 독립성

유형: Rule
문제: 회계법인이 감사업무를 수임할 수 있는지...

모범답안: O, 해당 거래는 회사의 통상적인 약관에 따른...

해설: [Check Point]
• 약관에 따른 거래
• 정상적인 거래 조건(정상가액)
...
```

---

## 📈 데이터 분류 및 활용 정책

RAG 시스템은 문서를 **공식 문서**와 **참고 자료**로 분류합니다.

### 공식 문서 (동등한 중요도)

모두 **동등하게 중요**하며, 주제에 따라 **종합적으로 고려**합니다.

1. **회계감사기준** (audit) - 공식 기준서 원문
2. **법령** (law) - 외부감사법, 공인회계사법 등
3. **윤리기준** (ethics) - KICPA 윤리기준

💡 **특히 독립성, 윤리 등의 주제는 3가지 문서를 모두 함께 검토해야 합니다.**

### 참고 자료

학습 및 실무 예시로만 활용합니다.

4. **암기교재** (study) - 학습용 참고자료
5. **KAM 사례** (kam) - 실무 적용 사례
6. **기출문제** (exam) - 시험 문제 참고

### LLM 시스템 프롬프트

```
참고문서 분류:
- 공식 문서: 회계감사기준, 법령(외부감사법, 공인회계사법), 윤리기준
  → 모두 동등하게 중요하며 함께 고려하세요
- 참고 자료: 암기교재, KAM 사례, 기출문제
  → 학습 및 실무 예시로만 활용하세요

독립성, 윤리 등의 주제는 회계감사기준, 법령, 윤리기준을
종합적으로 검토하여 답변하세요.
```

---

## 🔍 검색 옵션 활용

### 공식 문서만 검색
```javascript
const results = await window.ragService.search(question, 5, {
  types: ['audit', 'law', 'ethics']
});
```

### 실무 사례 중심 검색
```javascript
const results = await window.ragService.search(question, 5, {
  types: ['kam', 'exam']
});
```

### 특정 타입만 검색
```javascript
// 법령만
const lawResults = await window.ragService.search(question, 5, {
  types: ['law']
});

// KAM 사례만
const kamResults = await window.ragService.search(question, 5, {
  types: ['kam']
});
```

---

## 📊 예상 문서 수

| 데이터 소스 | 예상 문서 수 | 비고 |
|------------|------------|------|
| 회계감사기준 | 300~500개 | 기준서 36개 × 평균 10~15 문단 |
| 법령 | 100~200개 | 주요 법률 2~3개 × 평균 50~100 조문 |
| 윤리기준 | 150~250개 | 항목별 분할 |
| 암기교재 | 200~400개 | questions.json 전체 |
| KAM 사례 | 50~100개 | kamData.json 전체 |
| 기출문제 | 100~200개 | 2025, 2024 합산 |
| **총계** | **900~1650개** | 최종 벡터 파일 크기: 10~20MB |

---

## 🔄 데이터 업데이트 절차

### 새로운 연도 기출문제 추가

1. `js/features/exam/data/2026_hierarchical.json` 파일 생성
2. `scripts/build-vector.js`의 `INPUT_FILES`에 추가:
```javascript
examData2026: './js/features/exam/data/2026_hierarchical.json'
```
3. `main()` 함수에 정규화 로직 추가:
```javascript
const exam2026Docs = normalizeExamData(examData2026, '2026');
```
4. 벡터 재생성: `npm run build`

### 기준서 개정 반영

1. `DB/auditStandards.json` 파일 업데이트
2. 벡터 재생성: `npm run build`
3. Git 커밋 및 배포

---

## ⚠️ 주의사항

1. **questions.json ≠ 기출문제**
   - `questions.json`은 암기용 교재입니다.
   - 실제 기출문제는 `examData` 폴더에 있습니다.

2. **참고용 데이터 활용**
   - KAM, 암기교재, 기출문제는 참고용입니다.
   - 정확한 답변은 공식 문서(audit, law, ethics)를 우선시하세요.

3. **벡터 파일 크기**
   - 모든 데이터를 포함하면 10~20MB 예상
   - gzip 압축 권장 (웹서버 설정)

---

## 📝 요약

Gamlini RAG는 **공식 문서 3종 + 참고자료 3종**으로 구성되어,
회계 감사 전문 지식을 체계적으로 제공합니다.

**공식 문서 (1~3순위)**
- 회계감사기준 (audit)
- 법령 (law)
- 윤리기준 (ethics)

**참고 자료 (4~6순위)**
- 암기교재 (study)
- KAM 사례 (kam)
- 기출문제 (exam)

이를 통해 정확한 법령 기반 답변과 실무 적용 사례를 동시에 제공할 수 있습니다!
